!function(e,r,n){"use strict";var t=function(){return(t=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var u in r=arguments[n])Object.prototype.hasOwnProperty.call(r,u)&&(e[u]=r[u]);return e}).apply(this,arguments)},u=function(e){return{loading:void 0===e||null===e,value:e}},o=function(e){var n=e?e():void 0,o=r.useReducer(function(e,r){switch(r.type){case"error":return t({},e,{error:r.error,loading:!1,value:void 0});case"reset":return u(r.defaultValue);case"value":return t({},e,{error:void 0,loading:!1,value:r.value});default:return e}},u(n)),i=o[0],c=o[1],a=function(){var r=e?e():void 0;c({type:"reset",defaultValue:r})},s=function(e){c({type:"error",error:e})},f=function(e){c({type:"value",value:e})};return r.useMemo(function(){return{error:i.error,loading:i.loading,reset:a,setError:s,setValue:f,value:i.value}},[i.error,i.loading,a,s,f,i.value])},i=function(e,n,t){var u=r.useRef(e);return r.useEffect(function(){n(e,u.current)||(u.current=e,t&&t())}),u},c=function(e,r,n,t,u){if(e.exists()){var o=e.data(r);return u&&(o=u(o)),n&&(o[n]=e.id),t&&(o[t]=e.ref),o}},a=function(e,r){var t=!e&&!r,u=!!e&&!!r&&n.refEqual(e,r);return t||u},s=function(e,r){var t=!e&&!r,u=!!e&&!!r&&n.queryEqual(e,r);return t||u},f=function(e,t,u){var c=o(),a=c.error,f=c.loading,l=c.reset,v=c.setError,d=c.setValue,h=c.value,p=function(e,r){return i(e,s,r)}(t,l);r.useEffect(function(){if(p.current){if(e){var r=u&&u.snapshotListenOptions?n.onSnapshot(p.current,u.snapshotListenOptions,d,v):n.onSnapshot(p.current,d,v);return function(){r()}}(function(e){switch((void 0===e?{source:"default"}:e).source){default:case"default":return n.getDocs;case"cache":return n.getDocsFromCache;case"server":return n.getDocsFromServer}})(u?u.getOptions:void 0)(p.current).then(d).catch(v)}else d(void 0)},[p.current]);var g=[h,f,a];return r.useMemo(function(){return g},g)},l=function(e,n,t){var u=t?t.idField:void 0,o=t?t.refField:void 0,i=t?t.snapshotOptions:void 0,a=t?t.transform:void 0,s=f(e,n,t),l=s[0],v=s[1],d=s[2],h=[r.useMemo(function(){return l?l.docs.map(function(e){return c(e,i,u,o,a)}):void 0},[l,i,u,o,a]),v,d];return r.useMemo(function(){return h},h)};var v=function(e,t,u){var c=o(),s=c.error,f=c.loading,l=c.reset,v=c.setError,d=c.setValue,h=c.value,p=function(e,r){return i(e,a,r)}(t,l);r.useEffect(function(){if(p.current){if(e){var r=u&&u.snapshotListenOptions?n.onSnapshot(p.current,u.snapshotListenOptions,d,v):n.onSnapshot(p.current,d,v);return function(){r()}}(function(e){switch((void 0===e?{source:"default"}:e).source){default:case"default":return n.getDoc;case"cache":return n.getDocFromCache;case"server":return n.getDocFromServer}})(u?u.getOptions:void 0)(p.current).then(d).catch(v)}else d(void 0)},[p.current]);var g=[h,f,s];return r.useMemo(function(){return g},g)},d=function(e,n,t){var u=t?t.idField:void 0,o=t?t.refField:void 0,i=t?t.snapshotOptions:void 0,a=t?t.transform:void 0,s=v(e,n,t),f=s[0],l=s[1],d=s[2],h=[r.useMemo(function(){return f?c(f,i,u,o,a):void 0},[f,i,u,o,a]),l,d];return r.useMemo(function(){return h},h)};e.useCollection=function(e,r){return f(!0,e,r)},e.useCollectionOnce=function(e,r){return f(!1,e,r)},e.useCollectionData=function(e,r){return l(!0,e,r)},e.useCollectionDataOnce=function(e,r){return l(!1,e,r)},e.useDocument=function(e,r){return v(!0,e,r)},e.useDocumentData=function(e,r){return d(!0,e,r)},e.useDocumentOnce=function(e,r){return v(!1,e,r)},e.useDocumentDataOnce=function(e,r){return d(!1,e,r)}}(this["react-firebase-hooks"]=this["react-firebase-hooks"]||{},react,firestore);
//# sourceMappingURL=react-firebase-hooks-firestore.js.map
